<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Spooky and scary, wow!</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #000; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<canvas id="myCanvas" width="480" height="320"></canvas>

<script>
	var canvas = document.getElementById("myCanvas");
  var player = canvas.getContext("2d");
  var monster = canvas.getContext("2d");

  //Stats
  var gameOver = false;

  //Graphics

  //Keys
  var colors = [
    "#FF0000",
    "#00FF00",
    "#0000FF",
    "#FF00FF",
    "#FFFF00",
    "#00FFFF"
  ]
  var numbers = [
    1,
    2,
    3,
    4,
    5,
    6
  ]
  //Player Stats
  var playerX = canvas.width/2;
  var playerY = canvas.height-30;
  var charArea = 10;
  var moveSpeed = 2;

  //Monster Stats
  var monsterX = canvas.width/2;
  var monsterY = canvas.height-300;
  var monsterArea = 20;
  var monsterMoveRate = 3;
  var monsterSpeed = 3;

  //Player Movement
  var upPressed = false;
  var downPressed = false;
  var leftPressed = false;
  var rightPressed = false;

  document.addEventListener("keydown", keyDownHandler, false);
  document.addEventListener("keyup", keyUpHandler, false);

  function keyDownHandler(e){
    if(e.keyCode == 38){
      upPressed = true;
    }
    else if(e.keyCode == 40){
      downPressed = true;
    }
    else if(e.keyCode == 37){
      leftPressed = true;
    }
    else if(e.keyCode == 39){
      rightPressed = true;
    }
  }
  function keyUpHandler(e){
    if(e.keyCode == 38){
      upPressed = false;
    }
    else if(e.keyCode == 40){
      downPressed = false;
    }
    else if(e.keyCode == 37){
      leftPressed = false;
    }
    else if(e.keyCode == 39){
      rightPressed = false;
    }
  }

  function drawPlayer(){
    player.beginPath();
    player.rect(playerX, playerY, 10, 10);
    player.fillStyle = "#FFF";
    player.fill();
    player.closePath();
  }
  function drawMonster(){
    monster.beginPath();
    if(rollMonsterMovement() == 0){
      monsterMovement();
    }
    else{
      monster.rect(monsterX, monsterY, 20, 20);
    }
    monster.fillStyle = "#FF0000";
    monster.fill();
    monster.closePath();

  }

  function draw(){
    player.clearRect(0, 0, canvas.width, canvas.height);
    monster.clearRect(0, 0, canvas.width, canvas.height);
    drawPlayer();
    drawMonster();
    generateKeys();
    checkGameOver();
    if(upPressed && playerY > 0){
      playerY -= moveSpeed;
    }
    if(downPressed && playerY < canvas.height-charArea){
      playerY += moveSpeed;
    }
    if(leftPressed && playerX > 0){
      playerX -= moveSpeed;
    }
    if(rightPressed && playerX < canvas.width-charArea){
      playerX += moveSpeed;
    }

  }
  //Monster Behavior
  function monsterMovement(){
    if(monsterX > playerX){
      monsterX = monsterX - monsterSpeed;
    }
    if(monsterX < playerX){
      monsterX = monsterX + monsterSpeed;
    }
    if(monsterY > playerY){
      monsterY = monsterY - monsterSpeed;
    }
    if(monsterY < playerY){
      monsterY = monsterY + monsterSpeed;
    }
    monster.rect(monsterX, monsterY, 20, 20);
  }
  function rollMonsterMovement(){
     return(Math.round(Math.random() * monsterMoveRate));
  }
  //Keys
  function generateKeys(){
    for(var i = colors.length; i > 0; i--){
      var color = Math.round(Math.random() * colors.length);

    }
  }

  //Basic Game Functions
  function checkGameOver(){
    var xDist = playerX - monsterX;
    var yDist = playerY - monsterY;
    var distance = Math.sqrt( xDist * xDist + yDist * yDist );
    if(gameOver == false && distance < monsterArea - 5 && distance != 0){
      gameOver = true;
        alert("Gameover");
        document.location.reload();
    }
  }

  if(!gameOver){
    setInterval(draw, 10);
  }

</script>

</body>
</html>
